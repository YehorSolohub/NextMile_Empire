<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextMile ERP</title>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600;700&family=Rye&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="sidebar">
        <div class="logo">
            <img src="img/logo.svg" alt="NextMile Logo" class="logo-img">
        </div>

        <nav>
            <div class="nav-label">–û–ü–ï–†–ê–¶–Ü–ô–ù–ê –î–Ü–Ø–õ–¨–ù–Ü–°–¢–¨</div>
            
            <a href="#" class="menu-item active" data-target="clients">
                <i class="fa-solid fa-users"></i> –ö–õ–Ü–Ñ–ù–¢–ò (CRM)
            </a>

            <a href="#" class="menu-item" data-target="workshop">
                <i class="fa-solid fa-gears"></i> –í–ò–†–û–ë–ù–ò–¶–¢–í–û
            </a>

            <a href="#" class="menu-item" data-target="warehouse">
                <i class="fa-solid fa-boxes-stacked"></i> –°–ö–õ–ê–î
            </a>

            <a href="#" class="menu-item" data-target="kasa">
                <i class="fa-solid fa-chart-line"></i> –§–Ü–ù–ê–ù–°–ò (P&L)
            </a>

            <div class="nav-divider"></div>

            <div class="nav-label">–†–û–ó–í–ò–¢–û–ö</div>

            <a href="#" class="menu-item locked" title="–°–∫–æ—Ä–æ –±—É–¥–µ">
                <i class="fa-solid fa-user-group"></i> –ö–û–ú–ê–ù–î–ê (HR)
            </a>

            <a href="#" class="menu-item locked" title="–°–∫–æ—Ä–æ –±—É–¥–µ">
                <i class="fa-solid fa-bullhorn"></i> –ú–ê–†–ö–ï–¢–ò–ù–ì
            </a>

            <a href="#" class="menu-item locked" title="–°–∫–æ—Ä–æ –±—É–¥–µ">
                <i class="fa-solid fa-car"></i> –ê–í–¢–û–ü–ê–†–ö
            </a>

             <a href="#" class="menu-item locked" title="–°–∫–æ—Ä–æ –±—É–¥–µ">
                <i class="fa-solid fa-sack-dollar"></i> –Ü–ù–í–ï–°–¢–ò–¶–Ü–á
            </a>

            <div class="nav-divider"></div>

            <div class="nav-label">–ö–û–ù–¢–†–û–õ–¨</div>

            <a href="#" class="menu-item locked" title="–°–∫–æ—Ä–æ –±—É–¥–µ">
                <i class="fa-solid fa-clipboard-check"></i> –ö–û–ù–¢–†–û–õ–¨ –Ø–ö–û–°–¢–Ü
            </a>

            <a href="#" class="menu-item locked" title="–°–∫–æ—Ä–æ –±—É–¥–µ">
                <i class="fa-solid fa-shield-halved"></i> –ë–ï–ó–ü–ï–ö–ê
            </a>

            <div class="nav-divider"></div>

            <a href="#" class="menu-item locked" title="–°–∫–æ—Ä–æ –±—É–¥–µ">
                <i class="fa-solid fa-robot"></i> –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–Ü–Ø
            </a>

            <a href="#" class="menu-item locked" title="–°–∫–æ—Ä–æ –±—É–¥–µ">
                <i class="fa-solid fa-globe"></i> –ü–û–†–¢–ê–õ
            </a>

            <a href="#" class="menu-item locked" title="–°–∫–æ—Ä–æ –±—É–¥–µ">
                <i class="fa-solid fa-sliders"></i> –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø
            </a>
        </nav>
    </div>

    <div class="main-content">
        <div class="header">
            <div>
                <h1>NextMile Empire</h1>
                <p class="text-muted">–°–∏—Å—Ç–µ–º–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ—Å–µ—Ä–≤—ñ—Å–æ–º</p>
            </div>
            <button class="btn btn-icon" onclick="loadData()" title="–û–Ω–æ–≤–∏—Ç–∏ –¥–∞–Ω—ñ">
                <i class="fa-solid fa-rotate-right"></i>
            </button>
        </div>

        <div id="clientsList" class="grid-container"></div>

        <div id="kanbanBoard" class="kanban-container" style="display: none;"></div>

        <div id="warehouseView" style="display: none;">
            <div class="card fade-in">
                <div class="card-body">
                    <div class="view-header">
                        <h2>üì¶ –°–∫–ª–∞–¥ –∑–∞–ø—á–∞—Å—Ç–∏–Ω</h2>
                        <button class="btn btn-save" onclick="document.getElementById('productModal').showModal()">+ –î–æ–¥–∞—Ç–∏ –¢–æ–≤–∞—Ä</button>
                    </div>
                    <div class="table-wrapper">
                        <table class="styled-table">
                            <thead>
                                <tr>
                                    <th>–ê—Ä—Ç–∏–∫—É–ª</th>
                                    <th>–ù–∞–∑–≤–∞</th>
                                    <th>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</th>
                                    <th>–ó–∞–ª–∏—à–æ–∫</th>
                                    <th>–í—Ö—ñ–¥</th>
                                    <th>–í–∏—Ö—ñ–¥</th>
                                    <th class="text-right">–î—ñ—ó</th>
                                </tr>
                            </thead>
                            <tbody id="productsTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div id="kasaView" style="display: none;">
            <div class="view-header">
                <h2>üí∞ –§—ñ–Ω–∞–Ω—Å–∏ —Ç–∞ –ó–∞—Ä–ø–ª–∞—Ç–∏ (P&L)</h2>
            </div>

            <div class="dashboard-grid">
                <div class="dash-card income">
                    <div class="dash-title">–ó–∞–≥–∞–ª—å–Ω–∏–π –û–±–æ—Ä–æ—Ç</div>
                    <div class="dash-value" id="totalRevenue">0 ‚Ç¥</div>
                    <div class="dash-sub">–†–æ–±–æ—Ç–∏ + –ó–∞–ø—á–∞—Å—Ç–∏–Ω–∏</div>
                </div>
                <div class="dash-card expense">
                    <div class="dash-title">–í–∏—Ç—Ä–∞—Ç–∏ (–ó–∞–ø—á–∞—Å—Ç–∏–Ω–∏)</div>
                    <div class="dash-value" id="totalPartsCost">0 ‚Ç¥</div>
                </div>
                <div class="dash-card profit">
                    <div class="dash-title">"–ë—Ä—É–¥–Ω–∏–π" –ü—Ä–∏–±—É—Ç–æ–∫</div>
                    <div class="dash-value" id="grossProfit">0 ‚Ç¥</div>
                    <div class="dash-sub">–ë–µ–∑ –≤–∏—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –ó–ü</div>
                </div>
                <div class="dash-card salary">
                    <div class="dash-title">–§–æ–Ω–¥ –ó–∞—Ä–ø–ª–∞—Ç–∏</div>
                    <div class="dash-value" id="totalSalaryFund">0 ‚Ç¥</div>
                    <div class="dash-sub">–û—Ä—ñ—î–Ω—Ç–æ–≤–Ω–æ</div>
                </div>
            </div>

            <div class="card fade-in salary-section">
                <div class="card-body">
                    <h3 class="section-title">–ó–∞—Ä–ø–ª–∞—Ç–Ω–∞ –≤—ñ–¥–æ–º—ñ—Å—Ç—å</h3>
                    <div class="table-wrapper">
                        <table class="styled-table">
                            <thead>
                                <tr>
                                    <th>–ú–∞–π—Å—Ç–µ—Ä</th>
                                    <th>–ü–æ—Å–ª—É–≥</th>
                                    <th>–ì–æ–¥–∏–Ω–∏</th>
                                    <th>–ö–∞—Å–∞ —Ä–æ–±—ñ—Ç</th>
                                    <th>–ó–∞—Ä–ø–ª–∞—Ç–∞ (–ù–∞ —Ä—É–∫–∏)</th>
                                </tr>
                            </thead>
                            <tbody id="salaryTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <button class="fab" onclick="document.getElementById('clientModal').showModal()">
        <i class="fa-solid fa-plus"></i>
    </button>

    <dialog id="clientModal">
        <div class="modal-header">
            <span>–ù–æ–≤–∏–π –ö–ª—ñ—î–Ω—Ç</span>
            <button class="btn-close" onclick="document.getElementById('clientModal').close()"><i class="fa-solid fa-times"></i></button>
        </div>
        <form id="addClientForm">
            <div class="modal-body">
                <div class="form-group"><label>–ü–Ü–ë –ö–ª—ñ—î–Ω—Ç–∞</label><input type="text" id="newClientName" required></div>
                <div class="form-group"><label>–¢–µ–ª–µ—Ñ–æ–Ω</label><input type="text" id="newClientPhone" required></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-cancel" onclick="document.getElementById('clientModal').close()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                <button type="submit" class="btn-save">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
            </div>
        </form>
    </dialog>

    <dialog id="orderModal">
        <div class="modal-header">
            <span>–ó–∞–∫–∞–∑-–Ω–∞—Ä—è–¥</span>
            <button class="btn-close" onclick="document.getElementById('orderModal').close()"><i class="fa-solid fa-times"></i></button>
        </div>
        <form id="addOrderForm">
            <div class="modal-body">
                <input type="hidden" id="modalClientId">
                <label>–ê–≤—Ç–æ–º–æ–±—ñ–ª—å</label><input type="text" id="carModel" class="form-control" placeholder="BMW X5..." required>
                
                <div class="service-header-row">
                    <label class="no-margin">–†–û–ë–û–¢–ò</label>
                    <button type="button" class="btn-small" onclick="addServiceRow()">+ –†—è–¥–æ–∫</button>
                </div>
                
                <div id="services-container"></div>
                
                <div class="form-group spacer-top">
                    <label>–í–ê–†–¢–Ü–°–¢–¨ –ó–ê–ü–ß–ê–°–¢–ò–ù (–ì–†–ù)</label><input type="number" id="partsCost" class="form-control" oninput="calc()">
                </div>
                <div class="form-group">
                    <label>–ê–≤–∞–Ω—Å (–≥—Ä–Ω)</label><input type="number" id="advance" class="form-control" oninput="calc()">
                </div>
                <div id="liveTotal" class="total-display">–†–ê–ó–û–ú: 0 –≥—Ä–Ω</div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-cancel" onclick="document.getElementById('orderModal').close()">–ó–∞–∫—Ä–∏—Ç–∏</button>
                <button type="submit" class="btn-save">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
            </div>
        </form>
    </dialog>

    <dialog id="productModal">
        <div class="modal-header">
            <span>üì¶ –¢–æ–≤–∞—Ä</span>
            <button class="btn-close" onclick="document.getElementById('productModal').close()"><i class="fa-solid fa-times"></i></button>
        </div>
        <form id="addProductForm">
            <div class="modal-body">
                <div class="flex-row gap-15">
                    <div class="flex-1"><label>–ê—Ä—Ç–∏–∫—É–ª</label><input type="text" id="prodSku" placeholder="OC90" required></div>
                    <div class="flex-1"><label>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</label><input type="text" id="prodCategory" placeholder="–§—ñ–ª—å—Ç—Ä–∏"></div>
                </div>
                
                <label>–ù–∞–∑–≤–∞</label><input type="text" id="prodName" required>
                <label>–ö—ñ–ª—å–∫—ñ—Å—Ç—å</label><input type="number" id="prodQty" value="1">
                
                <div class="flex-row gap-15 mt-10">
                    <div class="flex-1">
                        <label>–í—Ö—ñ–¥</label>
                        <div class="input-group">
                            <input type="number" id="prodBuy">
                            <select id="prodCurrency"><option value="UAH">‚Ç¥</option><option value="USD">$</option><option value="EUR">‚Ç¨</option></select>
                        </div>
                    </div>
                    <div class="flex-1"><label>–í–∏—Ö—ñ–¥ (–ì–†–ù)</label><input type="number" id="prodSell" required></div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-cancel" onclick="document.getElementById('productModal').close()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                <button type="submit" class="btn-save">–î–æ–¥–∞—Ç–∏</button>
            </div>
        </form>
    </dialog>

    <script src="script.js"></script>
</body>
</html>
